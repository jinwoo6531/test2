(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CallingShuttle"],{"0fab":function(t,e,i){"use strict";var a=i("173c"),n=i.n(a);n.a},1356:function(t,e,i){t.exports=i.p+"img/end-icon.62451c2c.svg"},"169a":function(t,e,i){"use strict";i("caad"),i("45fc"),i("a9e3"),i("2532"),i("498a");var a=i("5530"),n=i("ade3"),s=(i("368e"),i("480e")),o=i("4ad4"),c=i("b848"),r=i("75eb"),l=i("e707"),h=i("e4d3"),d=i("21be"),u=i("f2e7"),v=i("a293"),p=i("58df"),f=i("d9bd"),m=i("80d2"),g=Object(p["a"])(o["a"],c["a"],r["a"],l["a"],h["a"],d["a"],u["a"]);e["a"]=g.extend({name:"v-dialog",directives:{ClickOutside:v["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200}},computed:{classes:function(){var t;return t={},Object(n["a"])(t,"v-dialog ".concat(this.contentClass).trim(),!0),Object(n["a"])(t,"v-dialog--active",this.isActive),Object(n["a"])(t,"v-dialog--persistent",this.persistent),Object(n["a"])(t,"v-dialog--fullscreen",this.fullscreen),Object(n["a"])(t,"v-dialog--scrollable",this.scrollable),Object(n["a"])(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(f["d"])("full-width",this)},beforeMount:function(){var t=this;this.$nextTick((function(){t.isBooted=t.isActive,t.isActive&&t.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick((function(){t.animate=!0,window.clearTimeout(t.animateTimeout),t.animateTimeout=window.setTimeout((function(){return t.animate=!1}),150)}))},closeConditional:function(t){var e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):l["a"].options.methods.hideScroll.call(this)},show:function(){var t=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){t.$refs.content.focus(),t.bind()}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(t){if(t.keyCode===m["q"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick((function(){return e&&e.focus()}))}this.$emit("keydown",t)},onFocusin:function(t){if(t&&this.retainFocus){var e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(t){return t.contains(e)}))){var i=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');i.length&&i[0].focus()}}},genContent:function(){var t=this;return this.showLazyContent((function(){return[t.$createElement(s["a"],{props:{root:!0,light:t.light,dark:t.dark}},[t.$createElement("div",{class:t.contentClasses,attrs:Object(a["a"])({role:"document",tabindex:t.isActive?0:void 0},t.getScopeIdAttrs()),on:{keydown:t.onKeydown},style:{zIndex:t.activeZIndex},ref:"content"},[t.genTransition()])])]}))},genTransition:function(){var t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent:function(){var t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:this.onClickOutside,args:{closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style=Object(a["a"])({},t.style,{maxWidth:"none"===this.maxWidth?void 0:Object(m["f"])(this.maxWidth),width:"auto"===this.width?void 0:Object(m["f"])(this.width)})),this.$createElement("div",t,this.getContentSlot())}},render:function(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}})},"16b7":function(t,e,i){"use strict";i("a9e3");var a=i("2b0e");e["a"]=a["a"].extend().extend({name:"delayable",props:{openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0}},data:function(){return{openTimeout:void 0,closeTimeout:void 0}},methods:{clearDelay:function(){clearTimeout(this.openTimeout),clearTimeout(this.closeTimeout)},runDelay:function(t,e){var i=this;this.clearDelay();var a=parseInt(this["".concat(t,"Delay")],10);this["".concat(t,"Timeout")]=setTimeout(e||function(){i.isActive={open:!0,close:!1}[t]},a)}}})},"173c":function(t,e,i){},1951:function(t,e,i){t.exports=i.p+"img/vehicle1.bde9d65c.svg"},"21be":function(t,e,i){"use strict";i("99af"),i("caad"),i("2532");var a=i("2909"),n=i("2b0e"),s=i("80d2");e["a"]=n["a"].extend().extend({name:"stackable",data:function(){return{stackElement:null,stackExclude:null,stackMinZIndex:0,isActive:!1}},computed:{activeZIndex:function(){if("undefined"===typeof window)return 0;var t=this.stackElement||this.$refs.content,e=this.isActive?this.getMaxZIndex(this.stackExclude||[t])+2:Object(s["o"])(t);return null==e?e:parseInt(e)}},methods:{getMaxZIndex:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.$el,i=[this.stackMinZIndex,Object(s["o"])(e)],n=[].concat(Object(a["a"])(document.getElementsByClassName("v-menu__content--active")),Object(a["a"])(document.getElementsByClassName("v-dialog__content--active"))),o=0;o<n.length;o++)t.includes(n[o])||i.push(Object(s["o"])(n[o]));return Math.max.apply(Math,i)}}})},"368e":function(t,e,i){},"480e":function(t,e,i){"use strict";i("7db0");var a=i("7560");e["a"]=a["a"].extend({name:"v-theme-provider",props:{root:Boolean},computed:{isDark:function(){return this.root?this.rootIsDark:a["a"].options.computed.isDark.call(this)}},render:function(){return this.$slots.default&&this.$slots.default.find((function(t){return!t.isComment&&" "!==t.text}))}})},"4ad4":function(t,e,i){"use strict";i("caad"),i("45fc"),i("b0c0"),i("b64b");var a=i("53ca"),n=i("16b7"),s=i("f2e7"),o=i("58df"),c=i("80d2"),r=i("d9bd"),l=Object(o["a"])(n["a"],s["a"]);e["a"]=l.extend({name:"activatable",props:{activator:{default:null,validator:function(t){return["string","object"].includes(Object(a["a"])(t))}},disabled:Boolean,internalActivator:Boolean,openOnHover:Boolean},data:function(){return{activatorElement:null,activatorNode:[],events:["click","mouseenter","mouseleave"],listeners:{}}},watch:{activator:"resetActivator",openOnHover:"resetActivator"},mounted:function(){var t=Object(c["n"])(this,"activator",!0);t&&["v-slot","normal"].includes(t)&&Object(r["b"])('The activator slot must be bound, try \'<template v-slot:activator="{ on }"><v-btn v-on="on">\'',this),this.addActivatorEvents()},beforeDestroy:function(){this.removeActivatorEvents()},methods:{addActivatorEvents:function(){if(this.activator&&!this.disabled&&this.getActivator()){this.listeners=this.genActivatorListeners();for(var t=Object.keys(this.listeners),e=0,i=t;e<i.length;e++){var a=i[e];this.getActivator().addEventListener(a,this.listeners[a])}}},genActivator:function(){var t=Object(c["m"])(this,"activator",Object.assign(this.getValueProxy(),{on:this.genActivatorListeners(),attrs:this.genActivatorAttributes()}))||[];return this.activatorNode=t,t},genActivatorAttributes:function(){return{role:"button","aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genActivatorListeners:function(){var t=this;if(this.disabled)return{};var e={};return this.openOnHover?(e.mouseenter=function(e){t.getActivator(e),t.runDelay("open")},e.mouseleave=function(e){t.getActivator(e),t.runDelay("close")}):e.click=function(e){var i=t.getActivator(e);i&&i.focus(),e.stopPropagation(),t.isActive=!t.isActive},e},getActivator:function(t){if(this.activatorElement)return this.activatorElement;var e=null;if(this.activator){var i=this.internalActivator?this.$el:document;e="string"===typeof this.activator?i.querySelector(this.activator):this.activator.$el?this.activator.$el:this.activator}else if(1===this.activatorNode.length||this.activatorNode.length&&!t){var a=this.activatorNode[0].componentInstance;e=a&&a.$options.mixins&&a.$options.mixins.some((function(t){return t.options&&["activatable","menuable"].includes(t.options.name)}))?a.getActivator():this.activatorNode[0].elm}else t&&(e=t.currentTarget||t.target);return this.activatorElement=e,this.activatorElement},getContentSlot:function(){return Object(c["m"])(this,"default",this.getValueProxy(),!0)},getValueProxy:function(){var t=this;return{get value(){return t.isActive},set value(e){t.isActive=e}}},removeActivatorEvents:function(){if(this.activator&&this.activatorElement){for(var t=Object.keys(this.listeners),e=0,i=t;e<i.length;e++){var a=i[e];this.activatorElement.removeEventListener(a,this.listeners[a])}this.listeners={}}},resetActivator:function(){this.removeActivatorEvents(),this.activatorElement=null,this.getActivator(),this.addActivatorEvents()}}})},"75eb":function(t,e,i){"use strict";i("4160"),i("159b");var a=i("ade3"),n=i("53ca"),s=i("9d65"),o=i("80d2"),c=i("58df"),r=i("d9bd");function l(t){var e=Object(n["a"])(t);return"boolean"===e||"string"===e||t.nodeType===Node.ELEMENT_NODE}e["a"]=Object(c["a"])(s["a"]).extend({name:"detachable",props:{attach:{default:!1,validator:l},contentClass:{type:String,default:""}},data:function(){return{activatorNode:null,hasDetached:!1}},watch:{attach:function(){this.hasDetached=!1,this.initDetach()},hasContent:function(){this.$nextTick(this.initDetach)}},beforeMount:function(){var t=this;this.$nextTick((function(){if(t.activatorNode){var e=Array.isArray(t.activatorNode)?t.activatorNode:[t.activatorNode];e.forEach((function(e){if(e.elm&&t.$el.parentNode){var i=t.$el===t.$el.parentNode.firstChild?t.$el:t.$el.nextSibling;t.$el.parentNode.insertBefore(e.elm,i)}}))}}))},mounted:function(){this.hasContent&&this.initDetach()},deactivated:function(){this.isActive=!1},beforeDestroy:function(){try{if(this.$refs.content&&this.$refs.content.parentNode&&this.$refs.content.parentNode.removeChild(this.$refs.content),this.activatorNode){var t=Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode];t.forEach((function(t){t.elm&&t.elm.parentNode&&t.elm.parentNode.removeChild(t.elm)}))}}catch(e){console.log(e)}},methods:{getScopeIdAttrs:function(){var t=Object(o["k"])(this.$vnode,"context.$options._scopeId");return t&&Object(a["a"])({},t,"")},initDetach:function(){var t;this._isDestroyed||!this.$refs.content||this.hasDetached||""===this.attach||!0===this.attach||"attach"===this.attach||(t=!1===this.attach?document.querySelector("[data-app]"):"string"===typeof this.attach?document.querySelector(this.attach):this.attach,t?(t.appendChild(this.$refs.content),this.hasDetached=!0):Object(r["c"])("Unable to locate target ".concat(this.attach||"[data-app]"),this))}}})},b855:function(t,e,i){t.exports=i.p+"img/profile.21315f5a.svg"},e4d3:function(t,e,i){"use strict";var a=i("2b0e");e["a"]=a["a"].extend({name:"returnable",props:{returnValue:null},data:function(){return{isActive:!1,originalValue:null}},watch:{isActive:function(t){t?this.originalValue=this.returnValue:this.$emit("update:return-value",this.originalValue)}},methods:{save:function(t){var e=this;this.originalValue=t,setTimeout((function(){e.isActive=!1}))}}})},e937:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"map-container pa-0 ma-0 flex-wrap",attrs:{fluid:"","grid-list-md":"","fill-height":""}},[a("v-layout",{staticClass:"ma-0",attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pa-0",staticStyle:{width:"100%",height:"100%"},attrs:{xs12:"",sm12:"",md12:""}},[a("v-card",{staticClass:"pa-0 ma-0",staticStyle:{width:"100% height: 100%"},attrs:{id:"map-container",outlined:"",tile:""}})],1),t.ready?a("v-flex",{staticClass:"d-flex flex-column justify-start text-center pa-0 call-infomation color: #FFF",attrs:{xs12:"",sm12:"",md12:""}},[a("v-card",{attrs:{flat:"",tile:"",color:"transparent"}},[a("v-card-text",{staticClass:"pa-6 pr-3"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"9"}},[a("v-card",{staticClass:"pa-0 text-left",attrs:{tile:"",flat:""}},[a("v-card-text",{staticClass:"pa-0 pl-1 pb-3 desination"},[a("span",{staticStyle:{"padding-right":"15px","font-size":"13px",color:"#27ae60"}},[t._v("출발지")]),t._v(t._s(t.start.name))]),a("v-card-text",{staticClass:"pa-0 pl-1 pb-2 desination"},[a("span",{staticStyle:{"padding-right":"15px","font-size":"13px",color:"#eb5757"}},[t._v("도착지")]),t._v(t._s(t.end.name))])],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-card",{staticClass:"pa-0 text-center",attrs:{tile:"",flat:""}},[a("v-card-text",{staticClass:"pa-0 pb-3 arrive-wrap"},[t._v("탑승인원")]),a("v-card-text",{staticClass:"pa-0 desination",staticStyle:{"font-size":"18px !important"}},[t._v(t._s(t.count)+"명")])],1)],1)],1)],1),a("v-divider",{staticClass:"ml-5 mr-5"}),a("v-list",{staticClass:"pa-0",attrs:{color:"transparent"}},[a("v-list-item",{attrs:{color:"transparent"}},[a("v-list-item-content",{staticStyle:{"text-align":"right"}},[a("v-list-item-title",{staticClass:"desination-info-title"},[t._v("셔틀 번호")]),a("v-list-item-subtitle",{staticClass:"desination-info-subtitle"},[t._v(t._s(t.vehicle_name))])],1),a("v-card",{staticClass:"ma-4",attrs:{flat:"",tile:"",color:"transparent"}},[a("v-img",{attrs:{src:i("b855")}})],1),a("v-list-item-content",{staticStyle:{"text-align":"left"}},[a("v-list-item-title",{staticClass:"desination-info-title"},[t._v("담당자")]),a("v-list-item-subtitle",{staticClass:"desination-info-subtitle"},[t._v(t._s(t.owner))])],1)],1)],1),a("span",{staticClass:"arrive-time"},[t._v(t._s(t.minutes||0===t.minutes?"약 "+t.minutes+"분 후":"시간계산 중"))]),t.minutes||0===t.minutes?a("span",{staticStyle:{color:"#828282"}},[t._v(" 셔틀이 출발지에 도착합니다.")]):t._e(),a("v-card-actions",{staticClass:"pa-0 pt-5 call-cancel-btn"},[a("v-btn",{staticClass:"callShuttle",staticStyle:{height:"50px"},attrs:{color:"#E61773"},nativeOn:{click:function(e){return t.callCancel(e)}}},[t._v("호출 취소하기")]),a("v-dialog",{attrs:{persistent:"","max-width":"280"},model:{value:t.callcanceldialog,callback:function(e){t.callcanceldialog=e},expression:"callcanceldialog"}},[a("v-card",{staticStyle:{width:"280px"}},[a("v-card-text",{staticClass:"text-center pa-0"},[a("v-card-text",{staticClass:"pa-0 call-dialog-content"},[t._v(" 셔틀 호출이 취소됩니다. 정말 취소하시겠습니까? ")])],1),a("v-card",{staticClass:"pa-0 d-flex align-self-end",attrs:{flat:""}},[a("v-container",{staticClass:"pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-btn",{staticClass:"pa-0 call-cancel-dialog-btn",attrs:{color:"#FAFAFA",tile:"",depressed:"",width:"100%",height:"56.5px"},nativeOn:{click:function(e){t.callcanceldialog=!1}}},[t._v("호출 유지하기")])],1),a("v-col",[a("v-btn",{staticClass:"pa-0 call-dialog-btn",attrs:{color:"#E61773",tile:"",depressed:"",width:"100%",height:"56.5px"},nativeOn:{click:function(e){return t.callCancleBtn(e)}}},[t._v("호출 취소하기")])],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"280"},model:{value:t.cancelCompleteDialog,callback:function(e){t.cancelCompleteDialog=e},expression:"cancelCompleteDialog"}},[a("v-card",{staticStyle:{width:"280px"}},[a("v-card-text",{staticClass:"text-center pa-0"},[a("v-card-text",{staticClass:"pa-0 call-dialog-content"},[t._v(" 호출이 취소되었습니다. ")])],1),a("v-card",{staticClass:"pa-0 d-flex align-self-end",attrs:{flat:""}},[a("v-container",{staticClass:"pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-btn",{staticClass:"pa-0 call-dialog-btn",attrs:{color:"#E61773",tile:"",depressed:"",width:"100%",height:"56.5px"},nativeOn:{click:function(e){return t.goToMain(e)}}},[t._v("확인")])],1)],1)],1)],1)],1)],1)],1)],1)],1):t._e()],1)],1)},n=[],s=(i("99af"),i("d81d"),i("fb6a"),i("b0c0"),i("a9e3"),i("ac1f"),i("5319"),i("96cf"),i("1da1")),o=i("b85c"),c=i("5530"),r=i("2f62"),l=i("bc3a"),h=i.n(l),d={name:"CallingShuttle",data:function(){return{ready:!1,map:null,OSMUrl:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",siteId:"",stationList:[],start:"",end:"",start_icon:{},end_icon:{},waypoints:[],callcanceldialog:!1,webSocketData:{},webSocketData2:{},eta:"",vehicle_site:0,vehicle_name:"",vehicle_user:"",vehicle_lat:"",vehicle_lon:"",mapInfo:{1:{name:"gunsan",setPoints:[35.812484,126.4101],zoom:15},2:{name:"daegu",setPoints:[35.836673,128.68652],zoom:15},3:{name:"sejong",setPoints:[36.599351,127.270606],zoom:15},4:{name:"sangam",setPoints:[37.5792,126.8917],zoom:15},18:{name:"sejong_Rfree",setPoints:[36.4945,127.3274],zoom:15}},points:{1:[],2:[{lat:35.836308,lon:128.681547,type:6},{lat:35.838673,lon:128.687892,type:6},{lat:35.83705,lon:128.690044,type:6},{lat:35.83459,lon:128.68652,type:6},{lat:35.836308,lon:128.681547,type:6}],3:[{lat:36.499351,lon:127.270606,type:6},{lat:36.50169,lon:127.272315,type:6}],4:[{lat:37.579333,lon:126.889036,type:6},{lat:37.57518,lon:126.89837,type:6},{lat:37.58299,lon:126.88485,type:6},{lat:37.581296,lon:126.885693,type:6},{lat:37.579333,lon:126.889036,type:6}],18:[{lat:36.49791,lon:127.33019,type:3},{lat:36.495534,lon:127.32989,type:2},{lat:36.495534,lon:127.330257,type:3},{lat:36.49529,lon:127.33077,type:2},{lat:36.49456,lon:127.32574,type:2},{lat:36.49819,lon:127.3258,type:3},{lat:36.49918,lon:127.3277,type:6}]},owner:"",cancelCompleteDialog:!1,realTimeVehicle:"",realTimeETA:""}},computed:Object(c["a"])({},Object(r["b"])({user:"user"}),{},Object(r["c"])(["uid"]),{minutes:function(){return this.eta?parseInt(this.eta[this.vehicle_id]):""}}),created:function(){var t=this;this.getStation(),this.getVehicle(),h.a.get("https://ondemand.tasio.io:400/shuttle-9d5cb/us-central1/app/api/read/"+this.uid).then((function(e){t.displayName=e.data.displayName,t.ready=!0})).catch((function(t){console.log("User read: ",t)}))},mounted:function(){var t=this;this.socket=this.$route.params.socket,this.vehicle_id=parseInt(this.$route.params.vehicle_id),this.start=this.$route.params.start,this.end=this.$route.params.end,this.count=this.$route.params.passenger,this.siteId=this.$route.params.site_id,this.socket.onmessage=function(e){var i=e.data;t.webSocketData=JSON.parse(i),console.log("CallingShuttle: ",t.webSocketData.what),"EVENT"==t.webSocketData.what&&"ondemand"==t.webSocketData.how.type&&"arrived"==t.webSocketData.how.function&&t.webSocketData.how.uid==t.uid?(t.socket.close(),t.$router.replace({name:"Thanks",query:{siteId:t.siteId}})):"EVENT"==t.webSocketData.what&&t.webSocketData.how.uid==t.uid&&"cancel_call"==t.webSocketData.how.function&&t.webSocketData.how.vehicle_id==t.vehicle_id&&(console.log("autocancel",t.webSocketData),t.socket.close(),t.$router.replace({name:"AutoCancel",query:{siteId:t.siteId}}))},this.map=this.$utils.map.createMap("map-container",{zoomControl:!1,routeWhileDragging:!1,attributionControl:!1}),this.$utils.map.createTileLayer(this.map,this.OSMUrl,{})},beforeDestroy:function(){clearInterval(this.realTimeETA),clearInterval(this.realTimeVehicle)},methods:{addMarker:function(){var t,e=this.$utils.map.createIcon({iconUrl:i("f036"),iconSize:[12,12]}),a=Object(o["a"])(this.stationList);try{for(a.s();!(t=a.n()).done;){var n=t.value;this.$utils.map.createMakerByXY(this.map,[n.lat,n.lon],{icon:e})}}catch(s){a.e(s)}finally{a.f()}},getStation:function(){var t=this;console.log("Request /api/stations/"),h.a.get("/api/stations/").then((function(e){if(200==e.status){var i,a=e.data,n=-1,s=Object(o["a"])(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(c.site==t.siteId){c.id==t.start.id&&(t.eta=JSON.parse(c.eta)),console.log(t.eta);while(n++<t.points[t.siteId].length)if(t.points[t.siteId][n].lat==c.lat&&t.points[t.siteId][n].lon==c.lon){c.points_idx=Number(n),t.stationList.push(c);break}}}}catch(r){s.e(r)}finally{s.f()}t.stationList=t.stationList.sort((function(t,e){return t.sta_Order<e.sta_Order?-1:1})),console.log("Response /api/stations/"),t.map.setView(t.mapInfo[t.vehicle_site].setPoints,t.mapInfo[t.vehicle_site].zoom),t.getRouting()}})).catch((function(e){console.log("station (GET) error: "),t.error=e,console.log(e)})),this.realTimeETA=setInterval(Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:h.a.get("/api/stations/".concat(this.start.id,"/")).then((function(t){200==t.status&&(e.eta=JSON.parse(t.data.eta),console.log("realTimeETA",e.eta))})).catch((function(t){console.log(t)}));case 1:case"end":return t.stop()}}),t,this)}))).bind(this),1e4)},getRouting:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.$utils.map.createIcon({iconUrl:i("f1ba"),iconSize:[40,40],iconAnchor:[20,40]}),n=t.$utils.map.createIcon({iconUrl:i("1356"),iconSize:[40,40],iconAnchor:[20,40]}),t.end.points_idx>t.start.points_idx?t.waypoints=t.points[t.vehicle_site].slice(t.start.points_idx,t.end.points_idx+1):t.waypoints=t.points[t.vehicle_site].slice(t.start.points_idx).concat(t.points[t.vehicle_site].slice(0,t.end.points_idx+1)),t.map.removeLayer(t.start_icon),t.start_icon=t.$utils.map.createMakerByXY(t.map,[t.points[t.vehicle_site][t.start.points_idx].lat,t.points[t.vehicle_site][t.start.points_idx].lon],{icon:a}),t.map.removeLayer(t.end_icon),t.end_icon=t.$utils.map.createMakerByXY(t.map,[t.points[t.vehicle_site][t.end.points_idx].lat,t.points[t.vehicle_site][t.end.points_idx].lon],{icon:n}),t.map.removeLayer(n),t.$utils.map.createRouting(t.map,{waypoints:t.waypoints,serviceUrl:"https://osrmserver.springgo.io/route/v1",addWaypoints:!1,draggableWaypoints:!1,showAlternatives:!1,routeWhileDragging:!1,fitSelectedRoutes:!1,lineOptions:{draggable:!1,styles:[{color:"#E51973",weight:5},{color:"transparent",weight:2}]},draggable:!1,autoRoute:!0,show:!1,createMarker:function(){return null}}),t.addMarker();case 10:case"end":return e.stop()}}),e)})))()},getVehicle:function(){var t=this;console.log("Request /api/vehicles/"),h.a.get("/api/vehicles/").then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var n,s,c,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("Response /api/vehicles/",a),n=a.data.sort((function(t,e){return t.id<e.id?-1:1})),s=t.$utils.map.createIcon({iconUrl:i("1951"),iconSize:[32,32]}),console.log("vehicle_data: ",n),console.log("vehicle_id: ",t.vehicle_id),c=Object(o["a"])(n);try{for(c.s();!(r=c.n()).done;)l=r.value,t.vehicle_id==l.id&&(t.vehicle_name=l.name,t.vehicle_user=l.user,t.vehicle_site=l.site,t.vehicle_lat=l.lat,t.vehicle_lon=l.lon)}catch(h){c.e(h)}finally{c.f()}if(t.getVehicleUser(),null==t.vehicle_lat&&null==t.vehicle_lon&&void 0==t.vehicle_lat&&void 0==t.vehicle_lon){e.next=12;break}return e.next=11,t.$utils.map.createMakerByXY(t.map,[t.vehicle_lat,t.vehicle_lon],{draggable:!1,icon:s});case 11:t.vehicle=e.sent;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.log("Vehicle Error: ",t)})),this.realTimeVehicle=setInterval(Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:h.a.get("/api/vehicles/".concat(this.vehicle_id)).then((function(t){var i=t.data;null==i.lat&&null==i.lon&&void 0==i.lat&&void 0==i.lon||e.vehicle.setLatLng([i.lat,i.lon])})).catch((function(t){console.log("SetInterval Error: ",t)}));case 1:case"end":return t.stop()}}),t,this)}))).bind(this),1e3)},getVehicleUser:function(){var t=this;h.a.get("/api/users/".concat(this.vehicle_user)).then((function(e){t.owner=e.data.username})).catch((function(t){console.log("/api/user/ Error: ",t)}))},callCancel:function(){this.callcanceldialog=!0},callCancleBtn:function(){this.cancleMessage(),this.disconnect(),this.callcanceldialog=!1,this.cancelCompleteDialog=!0},goToMain:function(){this.cancelCompleteDialog=!1,this.$router.replace("/map/".concat(this.siteId))},cancleMessage:function(){this.webSocketData2={where:"",who:"tasio_id",what:"EVENT",how:{type:"ondemand",vehicle_id:this.vehicle_id,function:"cancel_call",current_station_id:this.start.id,target_station_id:this.end.id,passenger:this.count,passenger_name:this.displayName,uid:this.uid}},this.socket.send(JSON.stringify(this.webSocketData2))},disconnect:function(){this.socket.close(),this.status="disconnected",console.log("socket",this.status)}}},u=d,v=(i("0fab"),i("2877")),p=i("6544"),f=i.n(p),m=i("8336"),g=i("b0af"),b=i("99d9"),y=i("62ad"),x=i("a523"),_=i("169a"),w=i("ce7e"),C=i("0e8f"),k=i("adda"),A=i("a722"),O=i("8860"),S=i("da13"),$=i("5d23"),E=i("0fd9"),D=Object(v["a"])(u,a,n,!1,null,"2e06825a",null);e["default"]=D.exports;f()(D,{VBtn:m["a"],VCard:g["a"],VCardActions:b["a"],VCardText:b["c"],VCol:y["a"],VContainer:x["a"],VDialog:_["a"],VDivider:w["a"],VFlex:C["a"],VImg:k["a"],VLayout:A["a"],VList:O["a"],VListItem:S["a"],VListItemContent:$["a"],VListItemSubtitle:$["b"],VListItemTitle:$["c"],VRow:E["a"]})},f036:function(t,e,i){t.exports=i.p+"img/station_icon.fa93d5e7.svg"},f1ba:function(t,e,i){t.exports=i.p+"img/start-icon.69956c04.svg"}}]);
//# sourceMappingURL=CallingShuttle.38abc66c.js.map